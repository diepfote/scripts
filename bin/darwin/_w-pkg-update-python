#!/usr/bin/env bash
# shellcheck disable=SC1090

set -o pipefail  # propagate errors
set -u  # exit on undefined
set -e  # exit on non-zero return value
#set -f  # disable globbing/filename expansion
shopt -s failglob  # error on unexpaned globs


cleanup () {
  set +x
  popd
}
trap cleanup EXIT

echo -e '\n--------\nuv\n' >&2

pushd

set -x
{
  uv lock --upgrade --verbose
  uv sync --verbose
} 2>&1 | grep -v DEBUG
set +x

echo -e '\n--------\nuv tool\n'  >&2
set -x
uv tool upgrade --all --verbose 2>&1 | grep -v DEBUG
set +x

