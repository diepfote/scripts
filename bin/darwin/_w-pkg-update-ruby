#!/usr/bin/env bash
# shellcheck disable=SC1090

set -o pipefail  # propagate errors
set -u  # exit on undefined
set -e  # exit on non-zero return value
#set -f  # disable globbing/filename expansion
shopt -s failglob  # error on unexpaned globs


echo -e '\n--------\nruby\n'  >&2

print_additional_arg_info () {
  local additional_arg="$1"
  if [[ "$additional_arg" =~ user ]]; then
    # shellcheck disable=SC2154
    echo "${PURPLE}[${NC}.${PURPLE}]$NC user"  >&2
  else
    # shellcheck disable=SC2154
    echo "${PURPLE}[${NC}.${PURPLE}]$NC global"  >&2
  fi
}

additional_args=('')  # global only
for additional_arg in "${additional_args[@]}"; do
  print_additional_arg_info "$additional_arg"
  gem update "$additional_arg"  # requires gem install rubygems-update
done

unset additional_args
unset -f print_additional_arg_info
