#!/usr/bin/env bash


source ~/Documents/scripts/source-me/colors.sh


_arbitrary_command()
{
  dir="$1"
  if [ "$(expr substr "$dir" 1 1)" = '#' ]; then
    # ignore commented lines
    exit
  fi

  # drop first argument
  set -- "${@:2:$#}"

  export NC="$(echo "$NC" | tr -d "$(echo -ne '\x0f')")" # fix ^0 in output on Mac OS
  echo -e "$PURPLE$dir$NC"

  if [ -d "$dir/.git" ]; then
    (cd "$dir" && "$@")
  else
    echo -en "$YELLOW"; echo -en "No .git dir in $dir$NC\n"
  fi
  echo
}

_arbitrary_command "$@"

