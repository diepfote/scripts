#!/usr/bin/env bash


# shellcheck disable=SC1090
source ~/Documents/scripts/source-me/colors.sh


_arbitrary_command()
{
  dir="$1"
  shift  # drop first arg
  if echo "$dir" | grep -E '^\s*#|^\s*$' 1>/dev/null 2>&1; then
    # ignore commented lines
    exit
  fi

  NC="$(echo "$NC" | tr -d "$(echo -ne '\x0f')")" # fix ^0 in output on Mac OS
  export NC
  echo -e "$PURPLE$dir$NC"

  if [ -d "$dir/.git" ]; then
    (cd "$dir" && "$@")
  else
    echo -en "$YELLOW"; echo -en "No .git dir in $dir$NC\n"
  fi
  echo
}

_arbitrary_command "$@"

